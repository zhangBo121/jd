"use strict";var id=location.href.split("?")[1].split("=")[1];console.log(id),ajax({url:"../data/goodslist.json",type:"get",dataType:"json",cache:"false",success:function(n){console.log(n),pagedata(n)}});var main_app=document.querySelector(".main_app");function pagedata(n){n.forEach(function(n){if(n.ID==id){var i=document.createElement("div");i.className="main",i.innerHTML='\n            <div class="main_head">\n                <p class="container">'.concat(n["店铺名称"],'</p>\n            </div>\n            <div class="productCheck container">\n                <div class="productCheck_left">\n                    <div class="minImgTop">\n                        <img src="').concat(n["图片地址"],'" alt="">\n                        <div class="mask"></div>\n                    </div>\n                    <div class="maxImgbox">\n                        <img src="').concat(n["图片地址"],'" alt="">\n                    </div>\n                    <ul class="minImg">\n                        <li><p class="prev"> &lt; </p></li>\n                        <div class="minImgbox">\n                            <div class="minImgbox_gather">\n                                <li class="minImgbox_show"><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                            </div>\n                        </div>\n                        <li><p class="next"> &gt; </p></li>\n                    </ul>\n                </div>\n                <div class="productCheck_right">\n                    <p>标题</p>\n                    <div class="productPrice">\n                        <div class="productPrice_left">\n                            <p>京东价</p>\n                        </div>\n                        <div class="productPrice_center">\n                            <p><span>￥</span><b>').concat(n["价格"],"</b><i>降价通知</i></p>\n                            <p><span>￥</span><b>").concat(.9*n["价格"],'</b><i>PLUS</i><em>PLUS会员专享价</em><strong>现在开通PLUS会员享限时优惠 >></strong></p>\n                        </div>\n                        <div class="productPrice_right">\n                            <p>累计评价</p>\n                            <span>').concat(n["总评价数"],'</span>\n                        </div>\n                    </div>\n                    <div class="dispatching">\n                        <div class="dispatching_head">\n                            <div class="dispatching_head_left">\n                                <p>配送至</p>\n                            </div>\n                            <div class="dispatching_head_right">\n                                <p><span>收货地址</span><b>有货</b></p>\n                                <ul class="support">\n                                    <li>支持</li>\n                                    <li>可配送海外</li>\n                                    <li>闪电退款</li>\n                                    <li>随心换</li>\n                                    <li>99元免基础运费</li>\n                                </ul>    \n                                <ul class="delivery"> \n                                    <li><img src="//img10.360buyimg.com/imagetools/jfs/t1/136750/17/12251/5189/5f8586e6E483b2f57/78ee33bdc7ef8c35.png" alt=""></li>\n                                    <li>次日达</li>\n                                    <li>预约送货</li>\n                                    <li>送货上门</li>\n                                </ul>\n                                <p>由 京东 发货, 并提供售后服务. 23:00前下单，预计明天(01月06日)送达</p>\n                            </div>\n                        </div>\n                        <div class="dispatching_foot">\n                            <span>重量</span>\n                            <b>3.0 kg</b>\n                        </div>\n                    </div>\n                    <div class="productNum">\n                        <div class="productNum_left">\n                            <span class="PNum01">1</span>\n                            \x3c!-- <input type="text" class="PNum" value="1"> --\x3e\n                            <p><span class="add">+</span><b class="cut">-</b></p>\n                        </div>\n                        <div class="productNum_right">\n                            <span class="buyCart">加入购物车</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- 详情 --\x3e\n            <div class="productDetail">\n                <div class="productDetail_top">\n                    <div class="productDetail_top_title">\n                        <h3>店长推荐</h3>\n                    </div>\n                    <ul class="productDetail_head">\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                    </ul>\n                </div>\n                <div class="productDetail_main container">\n                    <div class="productDetail_main_title">\n                        <h3 class="active">商品介绍</h3>\n                        <h3>规格与包装</h3>\n                        <h3>售后保障</h3>\n                        <h3>商品评价(').concat(n["总评价数"],')</h3>\n                        <h3>本店好评</h3>\n                    </div>\n                    <ul class="productDetail_content">\n                        <li class="show">1\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>2\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>3\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>4\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>5\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            '),main_app.appendChild(i),bigGlass()}})}var myBuyCart=document.querySelector(".myBuyCart");function bigGlass(){var a=document.querySelector(".minImgTop"),n=document.querySelector(".minImgTop img"),s=document.querySelector(".mask"),o=document.querySelector(".maxImgbox"),r=document.querySelector(".maxImgbox img"),d=document.querySelector(".productCheck_left");a.onmousemove=function(n){var i=n||event,c=i.pageX-d.offsetLeft-s.clientWidth/2,t=i.pageY-d.offsetTop-s.clientHeight/2;c<0&&(c=0),c>a.clientWidth/2&&(c=a.clientWidth/2),t<=0&&(t=0),t>a.clientHeight/2&&(t=a.clientHeight/2),s.style.left=c+"px",s.style.top=t+"px";var l=c/(a.clientWidth-s.clientWidth),e=t/(a.clientHeight-s.clientHeight);r.style.left=-l*(r.clientWidth-o.clientWidth)+"px",r.style.top=-e*(r.clientHeight-o.clientHeight)+"px"},a.onmouseenter=function(){s.style.display="block",o.style.display="block"},a.onmouseleave=function(){s.style.display="none",o.style.display="none"};var i=document.querySelector(".prev"),c=document.querySelector(".next"),t=document.querySelector(".minImgbox_gather"),l=document.querySelectorAll(".minImgbox_gather li"),e=0,p=0,m=0,u=l.length,g=l[0].clientWidth+4;c.onclick=function(){u-1<=++p&&(p=u-1),u-4<=++e?e=u-5:animate(t,{left:t.offsetLeft-g}),console.log(e)},i.onclick=function(){console.log(e),--p<=0&&(p=0),--e<0?e=0:animate(t,{left:t.offsetLeft+g})};for(var v=0;v<l.length;v++)l[v].index=v,l[v].onmouseenter=function(){l[m].className="",l[p].className="",l[this.index].className="minImgbox_show",n.src=l[this.index].firstElementChild.src,r.src=l[this.index].firstElementChild.src,m=this.index};document.querySelector(".productNum").onclick=function(n){var i=n.target,c=document.querySelector(".PNum01"),t=(document.querySelector(".PNum"),c.innerHTML);if("add"===i.className&&(20<=++t&&(t=20,console.log("商品加到最多")),c.innerHTML=t),"cut"===i.className&&(--t<=1&&(t=1,console.log("商品数量减到了最少")),c.innerHTML=t),"PNum01"===i.className){console.log(t);var l=document.createElement("input");l.className="PNum",l.value=t,i.parentElement.replaceChild(l,i),l.focus(),l.onblur=function(){var n=document.createElement("span");n.className="PNum01",20<=this.value&&(this.value=20),this.value<=1&&(this.value=1),n.innerHTML=this.value,l.parentNode.replaceChild(n,l)}}"buyCart"===i.className&&(console.log(333),console.log("加入购物车成功"))};var h=document.querySelectorAll(".productDetail_main_title h3"),f=document.querySelectorAll(".productDetail_content li");console.log(h),console.log(f);for(var y=0,b=0;b<h.length;b++)h[b].index=b,h[b].onclick=function(){h[y].className="",f[y].className="",h[this.index].className="active",f[this.index].className="show",y=this.index}}myBuyCart.onclick=function(){location.href="./cart.html"};