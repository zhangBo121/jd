"use strict";window.onload=function(){var r=location.href.split("?")[1].split("=")[1];console.log(r),ajax({url:"../data/goodslist.json",type:"get",dataType:"json",cache:"false",success:function(n){var t,c;n.forEach(function(n){if(n.ID==r){var t=document.createElement("div");t.className="main",t.innerHTML='\n            <div class="main_head">\n                <p class="container">'.concat(n["店铺名称"],'</p>\n            </div>\n            <div class="productCheck container">\n                <div class="productCheck_left">\n                    <div class="minImgTop">\n                        <img src="').concat(n["图片地址"],'" alt="">\n                        <div class="mask"></div>\n                    </div>\n                    <div class="maxImgbox">\n                        <img src="').concat(n["图片地址"],'" alt="">\n                    </div>\n                    <ul class="minImg">\n                        <li><p class="prev"> &lt; </p></li>\n                        <div class="minImgbox">\n                            <div class="minImgbox_gather">\n                                <li class="minImgbox_show"><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                            </div>\n                        </div>\n                        <li><p class="next"> &gt; </p></li>\n                    </ul>\n                </div>\n                <div class="productCheck_right">\n                    <p>标题</p>\n                    <div class="productPrice">\n                        <div class="productPrice_left">\n                            <p>京东价</p>\n                        </div>\n                        <div class="productPrice_center">\n                            <p><span>￥</span><b>').concat(n["价格"],"</b><i>降价通知</i></p>\n                            <p><span>￥</span><b>").concat(.9*n["价格"],'</b><i>PLUS</i><em>PLUS会员专享价</em><strong>现在开通PLUS会员享限时优惠 >></strong></p>\n                        </div>\n                        <div class="productPrice_right">\n                            <p>累计评价</p>\n                            <span>').concat(n["总评价数"],'</span>\n                        </div>\n                    </div>\n                    <div class="dispatching">\n                        <div class="dispatching_head">\n                            <div class="dispatching_head_left">\n                                <p>配送至</p>\n                            </div>\n                            <div class="dispatching_head_right">\n                                <p><span>收货地址</span><b>有货</b></p>\n                                <ul class="support">\n                                    <li>支持</li>\n                                    <li>可配送海外</li>\n                                    <li>闪电退款</li>\n                                    <li>随心换</li>\n                                    <li>99元免基础运费</li>\n                                </ul>    \n                                <ul class="delivery"> \n                                    <li><img src="//img10.360buyimg.com/imagetools/jfs/t1/136750/17/12251/5189/5f8586e6E483b2f57/78ee33bdc7ef8c35.png" alt=""></li>\n                                    <li>次日达</li>\n                                    <li>预约送货</li>\n                                    <li>送货上门</li>\n                                </ul>\n                                <p>由 京东 发货, 并提供售后服务. 23:00前下单，预计明天(01月06日)送达</p>\n                            </div>\n                        </div>\n                        <div class="dispatching_foot">\n                            <span>重量</span>\n                            <b>3.0 kg</b>\n                        </div>\n                    </div>\n                    <div class="productNum">\n                        <div class="productNum_left">\n                            <span class="PNum01">1</span>\n                            \x3c!-- <input type="text" class="PNum" value="1"> --\x3e\n                            <p><span class="add">+</span><b class="cut">-</b></p>\n                        </div>\n                        <div class="productNum_right">\n                            <span class="buyCart">加入购物车</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- 详情 --\x3e\n            <div class="productDetail">\n                <div class="productDetail_top">\n                    <div class="productDetail_top_title">\n                        <h3>店长推荐</h3>\n                    </div>\n                    <ul class="productDetail_head">\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                        <li>\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                        </li>\n                    </ul>\n                </div>\n                <div class="productDetail_main container">\n                    <div class="productDetail_main_title">\n                        <h3 class="active">商品介绍</h3>\n                        <h3>规格与包装</h3>\n                        <h3>售后保障</h3>\n                        <h3>商品评价(').concat(n["总评价数"],')</h3>\n                        <h3>本店好评</h3>\n                    </div>\n                    <ul class="productDetail_content">\n                        <li class="show">1\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>2\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>3\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>4\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                        <li>5\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            '),i.appendChild(t),function(){var a=document.querySelector(".minImgTop"),n=document.querySelector(".minImgTop img"),o=document.querySelector(".mask"),s=document.querySelector(".maxImgbox"),r=document.querySelector(".maxImgbox img"),d=document.querySelector(".productCheck_left");a.onmousemove=function(n){var t=n||event,c=t.pageX-d.offsetLeft-o.clientWidth/2,i=t.pageY-d.offsetTop-o.clientHeight/2;c<0&&(c=0),c>a.clientWidth/2&&(c=a.clientWidth/2),i<=0&&(i=0),i>a.clientHeight/2&&(i=a.clientHeight/2),o.style.left=c+"px",o.style.top=i+"px";var l=c/(a.clientWidth-o.clientWidth),e=i/(a.clientHeight-o.clientHeight);r.style.left=-l*(r.clientWidth-s.clientWidth)+"px",r.style.top=-e*(r.clientHeight-s.clientHeight)+"px"},a.onmouseenter=function(){o.style.display="block",s.style.display="block"},a.onmouseleave=function(){o.style.display="none",s.style.display="none"};var t=document.querySelector(".prev"),c=document.querySelector(".next"),i=document.querySelector(".minImgbox_gather"),l=document.querySelectorAll(".minImgbox_gather li"),e=0,m=0,u=0,p=l.length,g=l[0].clientWidth+4;c.onclick=function(){!function(){if(p-1<=++m&&(m=p-1),++e>=p-4)return e=p-5;animate(i,{left:i.offsetLeft-g})}(),console.log(e)},t.onclick=function(){console.log(e),function(){if(--m<=0&&(m=0),--e<0)return e=0;animate(i,{left:i.offsetLeft+g})}()};for(var v=0;v<l.length;v++)l[v].index=v,l[v].onmouseenter=function(){l[u].className="",l[m].className="",l[this.index].className="minImgbox_show",n.src=l[this.index].firstElementChild.src,r.src=l[this.index].firstElementChild.src,u=this.index}}(),function(){document.querySelector(".productNum").onclick=function(n){var t=n.target,c=document.querySelector(".PNum01"),i=c.innerHTML;if("add"===t.className){var l=JSON.parse(localStorage.getItem("goods"));console.log(l),l.forEach(function(n){n.id==r&&(console.log(666),10<=n.num?(n.num=10,console.log("超出购买数量")):n.num++)}),localStorage.setItem("goods",JSON.stringify(l)),10<=++i&&(i=10,console.log("商品加到最多")),c.innerHTML=i}if("cut"===t.className){var e=JSON.parse(localStorage.getItem("goods"));console.log(e),e.forEach(function(n){n.id==r&&(console.log(666),n.num<=1?(n.num=1,console.log("超出购买数量")):n.num--)}),localStorage.setItem("goods",JSON.stringify(e)),--i<=1&&(i=1,console.log("商品数量减到了最少")),c.innerHTML=i}if("PNum01"===t.className){var a=document.createElement("input");a.className="PNum",a.value=i,t.parentElement.replaceChild(a,t),a.focus(),a.onblur=function(){var t=this,n=document.createElement("span");n.className="PNum01",10<=this.value&&(this.value=10),this.value<=1&&(this.value=1);var c=JSON.parse(localStorage.getItem("goods"));c.forEach(function(n){n.id==r&&(console.log(666),console.log(t),n.num=t.value)}),localStorage.setItem("goods",JSON.stringify(c)),n.innerHTML=this.value,a.parentNode.replaceChild(n,a)}}if("buyCart"===t.className){var o=c.innerHTML-0;console.log(o);var s=JSON.parse(localStorage.getItem("goods"));s.forEach(function(n){n.id==r&&(console.log(666),10<n.num+o?alert("超出购买上限"):(n.num+=o,alert("加入购物车成功")))}),localStorage.setItem("goods",JSON.stringify(s))}};var n=document.querySelectorAll(".productDetail_main_title h3"),t=document.querySelectorAll(".productDetail_content li");console.log(n),console.log(t);for(var c=0,i=0;i<n.length;i++)n[i].index=i,n[i].onclick=function(){n[c].className="",t[c].className="",n[this.index].className="active",t[this.index].className="show",c=this.index}}()}}),t=JSON.parse(localStorage.getItem("goods")),c=document.querySelector(".PNum01"),console.log(c),t.forEach(function(n){n.id==r&&(c.innerHTML=n.num)})}});var i=document.querySelector(".main_app");document.querySelector(".myBuyCart").onclick=function(){location.href="./cart.html"}};