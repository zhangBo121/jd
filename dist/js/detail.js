"use strict";window.onload=function(){var o=location.href.split("?")[1].split("=")[1];o-=0,ajax({url:"../data/goodslist.json",type:"get",dataType:"json",cache:"false",success:function(n){var t,i;n.forEach(function(n){if(n.ID==o){var t=document.createElement("div");t.className="main",t.innerHTML='\n                <div class="main_head">\n                    <p class="container">'.concat(n["店铺名称"],'</p>\n                </div>\n                <div class="productCheck container">\n                    <div class="productCheck_left">\n                        <div class="minImgTop">\n                            <img src="').concat(n["图片地址"],'" alt="">\n                            <div class="mask"></div>\n                        </div>\n                        <div class="maxImgbox">\n                            <img src="').concat(n["图片地址"],'" alt="">\n                        </div>\n                        <ul class="minImg">\n                            <li><p class="prev"> &lt; </p></li>\n                            <div class="minImgbox">\n                                <div class="minImgbox_gather">\n                                    <li class="minImgbox_show"><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                    <li><img src="').concat(n["图片地址"],'" alt=""></li>\n                                </div>\n                            </div>\n                            <li><p class="next"> &gt; </p></li>\n                        </ul>\n                    </div>\n                    <div class="productCheck_right">\n                        <p>标题</p>\n                        <div class="productPrice">\n                            <div class="productPrice_left">\n                                <p>京东价</p>\n                            </div>\n                            <div class="productPrice_center">\n                                <p><span>￥</span><b>').concat(n["价格"],"</b><i>降价通知</i></p>\n                                <p><span>￥</span><b>").concat(.9*n["价格"],'</b><i>PLUS</i><em>PLUS会员专享价</em><strong>现在开通PLUS会员享限时优惠 >></strong></p>\n                            </div>\n                            <div class="productPrice_right">\n                                <p>累计评价</p>\n                                <span>').concat(n["总评价数"],'</span>\n                            </div>\n                        </div>\n                        <div class="dispatching">\n                            <div class="dispatching_head">\n                                <div class="dispatching_head_left">\n                                    <p>配送至</p>\n                                </div>\n                                <div class="dispatching_head_right">\n                                    <p><span>收货地址</span><b>有货</b></p>\n                                    <ul class="support">\n                                        <li>支持</li>\n                                        <li>可配送海外</li>\n                                        <li>闪电退款</li>\n                                        <li>随心换</li>\n                                        <li>99元免基础运费</li>\n                                    </ul>    \n                                    <ul class="delivery"> \n                                        <li><img src="//img10.360buyimg.com/imagetools/jfs/t1/136750/17/12251/5189/5f8586e6E483b2f57/78ee33bdc7ef8c35.png" alt=""></li>\n                                        <li>次日达</li>\n                                        <li>预约送货</li>\n                                        <li>送货上门</li>\n                                    </ul>\n                                    <p>由 京东 发货, 并提供售后服务. 23:00前下单，预计明天(01月06日)送达</p>\n                                </div>\n                            </div>\n                            <div class="dispatching_foot">\n                                <span>重量</span>\n                                <b>3.0 kg</b>\n                            </div>\n                        </div>\n                        <div class="productNum">\n                            <div class="productNum_left">\n                                <span class="PNum01">1</span>\n                                \x3c!-- <input type="text" class="PNum" value="1"> --\x3e\n                                <p><span class="add">+</span><b class="cut">-</b></p>\n                            </div>\n                            <div class="productNum_right">\n                                <span class="buyCart">加入购物车</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- 详情 --\x3e\n                <div class="productDetail">\n                    <div class="productDetail_top">\n                        <div class="productDetail_top_title">\n                            <h3>店长推荐</h3>\n                        </div>\n                        <ul class="productDetail_head">\n                            <li>\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                            </li>\n                            <li>\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                            </li>\n                            <li>\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                            </li>\n                            <li>\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                            </li>\n                            <li>\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                            </li>\n                            <li>\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <p><span>￥</span><b>').concat(n["价格"],'</b></p>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="productDetail_main container">\n                        <div class="productDetail_main_title">\n                            <h3 class="active">商品介绍</h3>\n                            <h3>规格与包装</h3>\n                            <h3>售后保障</h3>\n                            <h3>商品评价(').concat(n["总评价数"],')</h3>\n                            <h3>本店好评</h3>\n                        </div>\n                        <ul class="productDetail_content">\n                            <li class="show">1\n                                <img src="').concat(n["图片地址"],'" alt="">\n                                <img src="').concat(n["图片地址"],'" alt="">\n                            </li>\n                            <li>2\n                                <img src="').concat(n["图片地址"],'" alt="">\n                            </li>\n                            <li>3\n                                <img src="').concat(n["图片地址"],'" alt="">\n                            </li>\n                            <li>4\n                                <img src="').concat(n["图片地址"],'" alt="">\n                            </li>\n                            <li>5\n                                <img src="').concat(n["图片地址"],'" alt="">\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                '),c.appendChild(t),function(){var a=document.querySelector(".minImgTop"),n=document.querySelector(".minImgTop img"),s=document.querySelector(".mask"),o=document.querySelector(".maxImgbox"),r=document.querySelector(".maxImgbox img"),d=document.querySelector(".productCheck_left");a.onmousemove=function(n){var t=n||event,i=t.pageX-d.offsetLeft-s.clientWidth/2,c=t.pageY-d.offsetTop-s.clientHeight/2;i<0&&(i=0),i>a.clientWidth/2&&(i=a.clientWidth/2),c<=0&&(c=0),c>a.clientHeight/2&&(c=a.clientHeight/2),s.style.left=i+"px",s.style.top=c+"px";var e=i/(a.clientWidth-s.clientWidth),l=c/(a.clientHeight-s.clientHeight);r.style.left=-e*(r.clientWidth-o.clientWidth)+"px",r.style.top=-l*(r.clientHeight-o.clientHeight)+"px"},a.onmouseenter=function(){s.style.display="block",o.style.display="block"},a.onmouseleave=function(){s.style.display="none",o.style.display="none"};var t=document.querySelector(".prev"),i=document.querySelector(".next"),c=document.querySelector(".minImgbox_gather"),e=document.querySelectorAll(".minImgbox_gather li"),l=0,m=0,p=0,u=e.length,g=e[0].clientWidth+4;i.onclick=function(){!function(){if(u-1<=++m&&(m=u-1),++l>=u-4)return l=u-5;animate(c,{left:c.offsetLeft-g})}()},t.onclick=function(){!function(){if(--m<=0&&(m=0),--l<0)return l=0;animate(c,{left:c.offsetLeft+g})}()};for(var h=0;h<e.length;h++)e[h].index=h,e[h].onmouseenter=function(){e[p].className="",e[m].className="",e[this.index].className="minImgbox_show",n.src=e[this.index].firstElementChild.src,r.src=e[this.index].firstElementChild.src,p=this.index}}(),function(){document.querySelector(".productNum").onclick=function(n){var t=n.target,i=document.querySelector(".PNum01"),c=i.innerHTML;if("add"===t.className&&(10<=++c&&(c=10,alert("可购买商品已加到最多")),i.innerHTML=c),"cut"===t.className&&(--c<=1&&(c=1,alert("可购买商品数量减到了最少")),i.innerHTML=c),"PNum01"===t.className){var e=document.createElement("input");e.className="PNum",e.value=c,t.parentElement.replaceChild(e,t),e.focus(),e.onblur=function(){var n=document.createElement("span");n.className="PNum01",10<=this.value&&(this.value=10),this.value<=1&&(this.value=1),n.innerHTML=this.value,e.parentNode.replaceChild(n,e)}}if("buyCart"===t.className){var l=i.innerHTML-0;if(localStorage.getItem("goods")){var a=JSON.parse(localStorage.getItem("goods")),s=[];a.forEach(function(n){n.id==o?(s.push("a"),10<n.num-0+l?alert("超出购买上限"):(n.num+=l,alert("加入购物车成功"))):s.push("b")}),has(s,"a")||(a.push({id:o,num:l}),alert("加入购物车成功"))}else{var a=[{id:o,num:l}];alert("加入购物车成功")}localStorage.setItem("goods",JSON.stringify(a))}};for(var n=document.querySelectorAll(".productDetail_main_title h3"),t=document.querySelectorAll(".productDetail_content li"),i=0,c=0;c<n.length;c++)n[c].index=c,n[c].onclick=function(){n[i].className="",t[i].className="",n[this.index].className="active",t[this.index].className="show",i=this.index}}()}}),t=JSON.parse(localStorage.getItem("goods")),i=document.querySelector(".PNum01"),t.forEach(function(n){n.id==o&&(i.innerHTML=n.num)})}});var c=document.querySelector(".main_app");document.querySelector(".myBuyCart").onclick=function(){location.href="./cart.html"}};