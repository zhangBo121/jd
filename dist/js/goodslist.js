"use strict";var myBuyCart=document.querySelector(".myBuyCart");function pageLoad(t){var n=document.querySelector(".list");t.forEach(function(t){var o=document.createElement("li");o.innerHTML='\n        <p><a href="#"><img data-src='.concat(t["图片地址"],' alt="').concat(t["商品名称"],'" title="').concat(t["商品名称"],'"></a></p>\n        <p><i>￥ </i><b>').concat(t["价格"],'</b></p>\n        <p><a href="#">').concat(t["商品名称"],"</a></p>\n        <p>【京品】</p>\n        <p><b>").concat(t["总评价数"],'</b><span>条评价</span></p>\n        <p><a href="#">').concat(t["店铺名称"],"</a></p>\n        <p>").concat(t["店铺类型"],"</p>\n        <p><em><a href='./detail.html?id=").concat(t.ID,"'>查看详情</a></em><span><i class=\"iconfont icon-gouwuche\"></i><b class='addGoods'>加入购物车</b></span></p>\n        "),n.appendChild(o)});var o=document.querySelectorAll(".addGoods");Array.from(o).forEach(function(t,e){t.onclick=function(){var o=e+1;if(localStorage.getItem("goods"))var t=JSON.parse(localStorage.getItem("goods"));else t=[];var n=!1;0<t.length&&t.forEach(function(t){if(t.id===o)return t.num++,10<t.num&&(t.num=10,alert("超出可购买数量")),!(n=!0)}),n||t.push({id:o,num:1}),localStorage.setItem("goods",JSON.stringify(t)),alert("加入购物车成功")}}),document.querySelector(".todoCart").onclick=function(){location.href="./cart.html"};for(var c=[],e=n.children,a=0;a<e.length;a++)c.push(e[a].firstElementChild.firstElementChild.firstElementChild);function r(){for(var t=document.body.scrollTop||document.documentElement.scrollTop,o=document.documentElement.clientHeight,n=0,e=c.length;n<e;n++)offset(c[n]).top<=t+o&&(c[n].src=c[n].getAttribute("data-src"))}r(),window.onscroll=function(){r()}}myBuyCart.onclick=function(){location.href="./cart.html"},ajax({url:"../data/goodslist.json",type:"get",dataType:"json",data:"",success:function(t){console.log(t),pageLoad(t)},error:function(t){console.log(t)}});