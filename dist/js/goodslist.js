"use strict";var myBuyCart=document.querySelector(".myBuyCart");function pageLoad(o){var n=document.querySelector(".list");o.forEach(function(o){var t=document.createElement("li");t.innerHTML='\n        <p><a href="#"><img data-src='.concat(o["图片地址"],' alt="').concat(o["商品名称"],'" title="').concat(o["商品名称"],'"></a></p>\n        <p><i>￥ </i><b>').concat(o["价格"],'</b></p>\n        <p><a href="#">').concat(o["商品名称"],"</a></p>\n        <p>【京品】</p>\n        <p><b>").concat(o["总评价数"],'</b><span>条评价</span></p>\n        <p><a href="#">').concat(o["店铺名称"],"</a></p>\n        <p>").concat(o["店铺类型"],"</p>\n        <p><em><a href='./detail.html?id=").concat(o.ID,"'>查看详情</a></em><span><i class=\"iconfont icon-gouwuche\"></i><b class='addGoods'>加入购物车</b></span></p>\n        "),n.appendChild(t)});var t=document.querySelectorAll(".addGoods");Array.from(t).forEach(function(o,e){o.onclick=function(){console.log(e);var t=e+1;if(localStorage.getItem("goods"))var o=JSON.parse(localStorage.getItem("goods"));else o=[];var n=!1;0<o.length&&o.forEach(function(o){if(o.id===t)return o.num++,!(n=!0)}),n||o.push({id:t,num:1}),localStorage.setItem("goods",JSON.stringify(o)),alert("加入购物车成功")}}),document.querySelector(".todoCart").onclick=function(){location.href="./cart.html"};for(var c=[],e=n.children,a=0;a<e.length;a++)c.push(e[a].firstElementChild.firstElementChild.firstElementChild);function r(){for(var o=document.body.scrollTop||document.documentElement.scrollTop,t=document.documentElement.clientHeight,n=0,e=c.length;n<e;n++)offset(c[n]).top<=o+t&&(c[n].src=c[n].getAttribute("data-src"))}r(),window.onscroll=function(){r()}}myBuyCart.onclick=function(){location.href="./cart.html"},ajax({url:"../data/goodslist.json",type:"get",dataType:"json",data:"",success:function(o){console.log(o),pageLoad(o)},error:function(o){console.log(o)}});